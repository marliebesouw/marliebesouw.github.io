<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Redirecting…</title>
    <meta name="robots" content="noindex" />
  </head>
  <body>
    <p>Redirecting…</p>
    <script>
      // Basis pad (bijv. "/videos")
      var base = location.pathname.replace(/\/reset-bridge\.html$/, "");

      // Supabase zet hier de PKCE params zoals ?type=recovery&code=...
      var q = location.search.replace(/^\?/, ""); // "type=recovery&code=..."

      // Debug: laat kort zien wat er binnenkomt
      try { console.log("[bridge] search=", location.search, "hash=", location.hash); } catch {}

      // 1) Doelroute voor je HashRouter
      var hashRoute = base + "/#/reset-password" + (q ? "?" + q : "");

      // 2) Extra defensief: zet dezelfde query óók vóór de hash
      //    Zo kunnen libs die alleen window.location.search lezen, de code ook vinden
      var finalUrl = base + (q ? "?" + q : "") + "/#/" + "reset-password" + (q ? "?" + q : "");

      // Redirect (geen extra history entry)
      location.replace(finalUrl);
    </script>
  </body>
</html>
